<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DreamCoach - Professional Dream Analysis</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="landing-hero">
        <div class="hero-bg"></div>
        <div class="hero-content">
            <div class="logo-icon" style="width: 80px; height: 80px; font-size: 3rem; margin: 0 auto 2rem;">
                <i class="material-icons">psychology</i>
            </div>
            <h1 class="hero-title">Unlock Your Dreams</h1>
            <p class="hero-subtitle">
                Professional AI-powered dream analysis to help you understand your subconscious mind with clinical precision
            </p>
            
            <div class="features-preview">
                <div class="feature-item">
                    <i class="material-icons">psychology</i>
                    <span>Jungian Analysis</span>
                </div>
                <div class="feature-item">
                    <i class="material-icons">insights</i>
                    <span>Pattern Recognition</span>
                </div>
                <div class="feature-item">
                    <i class="material-icons">analytics</i>
                    <span>Trend Analysis</span>
                </div>
            </div>
            
            <div class="cta-buttons">
                <a href="#" class="btn-primary" id="startFreeBtn">
                    <i class="material-icons">star</i>
                    Analyze Your Dream Free
                </a>
                <a href="/pricing.html" class="btn-secondary">
                    View Pricing Plans
                </a>
            </div>
            
            <p class="login-link">
                Already have an account? <a href="#" id="loginLink">Sign in</a>
            </p>
        </div>
    </div>

    <!-- Auth Modal -->
    <div class="auth-modal hidden" id="authModal">
        <div class="auth-container">
            <div class="auth-header">
                <div class="logo" style="justify-content: center;">
                    <div class="logo-icon">
                        <i class="material-icons">psychology</i>
                    </div>
                    <h2 class="logo-text">DreamCoach</h2>
                </div>
            </div>

            <div class="auth-tabs">
                <button class="tab-button active" data-tab="signin">Sign In</button>
                <button class="tab-button" data-tab="signup">Sign Up</button>
            </div>

            <form class="auth-form" id="authForm">
                <div class="form-group" id="nameGroup" style="display: none;">
                    <label for="name">Full Name</label>
                    <input type="text" id="name" name="name" placeholder="Enter your name">
                </div>

                <div class="form-group">
                    <label for="email">Email</label>
                    <input type="email" id="email" name="email" placeholder="Enter your email" required>
                </div>

                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" name="password" placeholder="Enter your password" required>
                </div>

                <button type="submit" class="submit-btn">
                    <span id="submitBtnText">Sign In</span>
                </button>

                <div class="divider">or</div>

                <button type="button" class="google-btn" id="googleSignInBtn">
                    <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" width="18" height="18" alt="Google">
                    Continue with Google
                </button>
            </form>
        </div>
    </div>

    <script type="module" src="js/firebase-config.js"></script>
    <script type="module">
        import AuthManager from './js/auth.js';

        // Modal handling
        const authModal = document.getElementById('authModal');
        const startFreeBtn = document.getElementById('startFreeBtn');
        const loginLink = document.getElementById('loginLink');
        const tabButtons = document.querySelectorAll('.tab-button');
        const nameGroup = document.getElementById('nameGroup');
        const submitBtnText = document.getElementById('submitBtnText');
        const authForm = document.getElementById('authForm');
        const googleSignInBtn = document.getElementById('googleSignInBtn');

        // Show modal
        function showAuthModal(mode = 'signin') {
            authModal.classList.remove('hidden');
            const activeTab = document.querySelector(`.tab-button[data-tab="${mode}"]`);
            activeTab.click();
        }

        // Hide modal
        authModal.addEventListener('click', (e) => {
            if (e.target === authModal) {
                authModal.classList.add('hidden');
            }
        });

        // Tab switching
        tabButtons.forEach(button => {
            button.addEventListener('click', () => {
                const tab = button.dataset.tab;
                tabButtons.forEach(btn => btn.classList.remove('active'));
                button.classList.add('active');

                if (tab === 'signup') {
                    nameGroup.style.display = 'block';
                    submitBtnText.textContent = 'Sign Up';
                } else {
                    nameGroup.style.display = 'none';
                    submitBtnText.textContent = 'Sign In';
                }
            });
        });

        // Auth form submission
        authForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const mode = document.querySelector('.tab-button.active').dataset.tab;
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const name = document.getElementById('name').value;

            try {
                await AuthManager.authStatePromise;
                if (mode === 'signup') {
                    await AuthManager.signUp(email, password, name);
                } else {
                    await AuthManager.signIn(email, password);
                }
                authModal.classList.add('hidden');
            } catch (err) {
                console.error(err);
                alert(err.message);
            }
        });

        // Google sign in
        googleSignInBtn.addEventListener('click', async () => {
            try {
                await AuthManager.authStatePromise;
                await AuthManager.signInWithGoogle();
                authModal.classList.add('hidden');
            } catch (err) {
                console.error(err);
                alert(err.message);
            }
        });

        // Event listeners
        startFreeBtn.addEventListener('click', (e) => {
            e.preventDefault();
            showAuthModal('signup');
        });

        loginLink.addEventListener('click', (e) => {
            e.preventDefault();
            showAuthModal('signin');
        });
    </script>
</body>
</html>
